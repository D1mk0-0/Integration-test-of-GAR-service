## Integration test of GAR service
Тест разработанный для проверки соответствия API контракту и качеству ответа (подсказки) от сервиса.
***
#### Содержание
* [Описание](#Описание)
* [Структура и методы](#Структура-и-методы)  
* [Запуск](#Запуск)  
***
#### Описание
Тест отправляет запросы и проверяет ответы сервиса GAR. В нем реализованы проверки: 

* Корректная структура ответа Addresses ID
* Корректная структура ответа Addresses
* Код ответа 404 при отправке адреса, которого не существует 
* Код ответа 400 при отправке неправильного запроса
* Количество возвращаемых подсказок равно значению limit
* Возвращается ожидаемая подсказка

Пока это небольшой, несколько 
неправильный (с точки зрения тест-дизайна)
автоматизированный тест на Python и Pytest. Однако он еще в стадии разработки. 
***
#### Структура и методы 
Тест разработан с помощью паттерна Page Obgect и содержит тесты в файлах: 

* test_gar_api_contract_addresses.py - тест контракта API addresses
* test_gar_api_contract_addresses_id.py - тест контракта API addresses id
* test_gar_hint_quality_addresses.py - тест качества подсказок

В папке methods находятся файлы с методами и проверками. 
В папке data подготовлены данные для проведения проверок:

* address_data.json - содержит пары ключ : значение, для теста "Возвращается ожидаемая подсказка"
  * Ключ - адрес, посылаемый на сервис
  * Значение - ожидаемая подсказка
####
* inspected_data.py - содержит:
  * INSPECTED_ADDRESS_VALUE - один адрес для теста "Корректная структура ответа Addresses"
  * NON_EXISTENT_ADDRESS - адрес, которого не существует, для теста "Код ответа 404 при отправке адреса, которого не существует"
  * INSPECTING_ADDRESS_PATTERN - шаблон, а точнее schema, используемая плагином jsonschema, для проверки корректной структуры ответа.
  * INSPECTING_ID_PATTERN - то же schema, только для теста "Корректная структура ответа Addresses ID"
####
* negative_data.py - содержит функцию negative_data. Она возвращает пару, где первое значение - "name", а второе "limit" и заполнены данными для негативной проверки, выполняемой тестом "Код ответа 400 при отправке неправильного запроса".

***
#### Запуск
1. Скачать или клонировать репозиторий с помощью ```git clone```
2. Перейти в корневую папку в терминале или IDE и установить пакеты ```pip install -r requirements.txt```
3. Для запуска всех тестов использовать команду ```pytest``` в том же терминале. Или ```pytest -v -s ``` для получения подробных сообщений об ошибках. 
4. Так же, доступен запуск отдельных тестов с помощью команд:
   * ```pytest -m id_structure``` - корректная структура ответа Addresses ID
   * ```pytest -m answer_structure``` - корректная структура ответа Addresses
   * ```pytest -m error_404``` - код ответа 404 при отправке адреса, которого не существует
   * ```pytest -m error_400``` - код ответа 400 при отправке неправильного запроса
   * ```pytest -m correct_limit``` - количество возвращаемых подсказок равно значению limit
   * ```pytest -m hint_quality``` - возвращается ожидаемая подсказка